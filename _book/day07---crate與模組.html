<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 8 Day07 - crate與模組 | Rust之書</title>
<meta name="author" content="董宸賓">
<meta name="description" content="8.1 crate Rust程式是由crate組成的，每一個crate都是一個單元，除了程式庫與可執行檔到原始碼，還有其他如範例、測試等東西，你很難避免使用第三方程式庫來組成一個運用良好的程式。 我們再過去的專案中，提過用use宣告式來宣告我們需要的crate use num::Complex; use std ::str::FromStr;...">
<meta name="generator" content="bookdown 0.36.2 with bs4_book()">
<meta property="og:title" content="Chapter 8 Day07 - crate與模組 | Rust之書">
<meta property="og:type" content="book">
<meta property="og:description" content="8.1 crate Rust程式是由crate組成的，每一個crate都是一個單元，除了程式庫與可執行檔到原始碼，還有其他如範例、測試等東西，你很難避免使用第三方程式庫來組成一個運用良好的程式。 我們再過去的專案中，提過用use宣告式來宣告我們需要的crate use num::Complex; use std ::str::FromStr;...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 8 Day07 - crate與模組 | Rust之書">
<meta name="twitter:description" content="8.1 crate Rust程式是由crate組成的，每一個crate都是一個單元，除了程式庫與可執行檔到原始碼，還有其他如範例、測試等東西，你很難避免使用第三方程式庫來組成一個運用良好的程式。 我們再過去的專案中，提過用use宣告式來宣告我們需要的crate use num::Complex; use std ::str::FromStr;...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.5.1/transition.js"></script><script src="libs/bs3compat-0.5.1/tabs.js"></script><script src="libs/bs3compat-0.5.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><link href="libs/panelset-0.2.6/panelset.css" rel="stylesheet">
<script src="libs/panelset-0.2.6/panelset.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Rust之書</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> About</a></li>
<li><a class="" href="day1---%E5%88%B0%E8%99%95%E7%9C%8B%E7%9C%8B.html"><span class="header-section-number">2</span> Day1 - 到處看看</a></li>
<li><a class="" href="day2---%E5%9E%8B%E6%85%8B.html"><span class="header-section-number">3</span> Day2 - 型態</a></li>
<li><a class="" href="%E6%89%80%E6%9C%89%E6%AC%8A%E8%88%87%E7%A7%BB%E5%8B%95.html"><span class="header-section-number">4</span> 所有權與移動</a></li>
<li><a class="" href="%E5%8F%83%E8%80%83.html"><span class="header-section-number">5</span> 參考</a></li>
<li><a class="" href="day5-%E9%81%8B%E7%AE%97%E5%BC%8F.html"><span class="header-section-number">6</span> Day5-運算式</a></li>
<li><a class="" href="day06---%E9%8C%AF%E8%AA%A4.html"><span class="header-section-number">7</span> Day06 - 錯誤</a></li>
<li><a class="active" href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html"><span class="header-section-number">8</span> Day07 - crate與模組</a></li>
<li><a class="" href="day08---%E7%B5%90%E6%A7%8B.html"><span class="header-section-number">9</span> Day08 - 結構</a></li>
<li><a class="" href="day09---enum%E8%88%87%E6%A8%A1%E5%BC%8F.html"><span class="header-section-number">10</span> Day09 - enum與模式</a></li>
<li><a class="" href="day10-tarit%E8%88%87%E6%B3%9B%E5%9E%8B.html"><span class="header-section-number">11</span> Day10-tarit與泛型</a></li>
<li><a class="" href="day11-closure.html"><span class="header-section-number">12</span> Day11-closure</a></li>
<li><a class="" href="day12-iterator.html"><span class="header-section-number">13</span> Day12-Iterator</a></li>
<li><a class="" href="day13-%E9%9B%86%E5%90%88.html"><span class="header-section-number">14</span> Day13-集合</a></li>
<li><a class="" href="r_unique.html"><span class="header-section-number">15</span> R_unique</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rstudio/bookdown-demo">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="day07---crate與模組" class="section level1" number="8">
<h1>
<span class="header-section-number">8</span> Day07 - crate與模組<a class="anchor" aria-label="anchor" href="#day07---crate%E8%88%87%E6%A8%A1%E7%B5%84"><i class="fas fa-link"></i></a>
</h1>
<div id="crate" class="section level2" number="8.1">
<h2>
<span class="header-section-number">8.1</span> crate<a class="anchor" aria-label="anchor" href="#crate"><i class="fas fa-link"></i></a>
</h2>
<p>Rust程式是由crate組成的，每一個crate都是一個單元，除了程式庫與可執行檔到原始碼，還有其他如範例、測試等東西，你很難避免使用第三方程式庫來組成一個運用良好的程式。</p>
<p>我們再過去的專案中，提過用<code>use</code>宣告式來宣告我們需要的crate</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb128-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb128-1" tabindex="-1"></a><span class="kw">use</span> <span class="pp">num::</span>Complex<span class="op">;</span></span>
<span id="cb128-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb128-2" tabindex="-1"></a><span class="kw">use</span> std <span class="pp">::</span><span class="dt">str</span><span class="pp">::</span><span class="bu">FromStr</span><span class="op">;</span></span></code></pre></div>
<p>並且要在Cargo.toml中指定各版本的crate：</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb129-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb129-1" tabindex="-1"></a>[dependencies]</span>
<span id="cb129-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb129-2" tabindex="-1"></a>num <span class="op">=</span> <span class="st">"0.4"</span></span>
<span id="cb129-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb129-3" tabindex="-1"></a>image <span class="op">=</span> <span class="st">"0.13"</span></span>
<span id="cb129-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb129-4" tabindex="-1"></a>crossbeam <span class="op">=</span> <span class="st">"0.8"</span></span></code></pre></div>
<p><code>dependencies</code>代表這個專案需要的crate，當你執行<code>cargo build</code>時，Cargo會自動幫你下載這些crate，並且讀取crate的cargo.toml，下載這些crate，以此往復。</p>
<p>在Cargo取得原始碼後，它會編譯所有的crate，這裡不是執行main()，而是產生一個.rlib檔，在編譯器讀取後，會將程式碼靜態地連結至最終的可執行檔內。</p>
<div id="edtion" class="section level3" number="8.1.1">
<h3>
<span class="header-section-number">8.1.1</span> edtion<a class="anchor" aria-label="anchor" href="#edtion"><i class="fas fa-link"></i></a>
</h3>
<p>Rust有極強的相容性保證，但程式的進化可能導致舊版與新版出現彼此爭議。例如，Rust決定將識別符號async與await改成關鍵字，這樣的改變可能破壞async或await當成變數的程式碼。</p>
<p>因此在Cargo.toml中，你可以指定<code>edition</code>，這樣Cargo就會使用指定的edition來編譯程式碼。</p>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">edition</span> <span class="op">=</span> <span class="st">"2018"</span></span></code></pre></div>
<p>如果沒有指定，Cargo會使用預設的edition，目前是2015。</p>
</div>
<div id="buid-profile" class="section level3" number="8.1.2">
<h3>
<span class="header-section-number">8.1.2</span> buid profile<a class="anchor" aria-label="anchor" href="#buid-profile"><i class="fas fa-link"></i></a>
</h3>
<p>你可以加入一些動態設定來改變cargo的動態命令，通常你只要維持預設值，除了你想要profiler時，它可以測量你的程式在哪裡花費CPU時間。要同時啟動優化與debug，你要加入：</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb131-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb131-1" tabindex="-1"></a>[profile<span class="op">.</span>release]</span>
<span id="cb131-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb131-2" tabindex="-1"></a>debug <span class="op">=</span> <span class="cn">true</span></span></code></pre></div>
</div>
</div>
<div id="模組" class="section level2" number="8.2">
<h2>
<span class="header-section-number">8.2</span> 模組<a class="anchor" aria-label="anchor" href="#%E6%A8%A1%E7%B5%84"><i class="fas fa-link"></i></a>
</h2>
<p>crate是在不同專案之間共用程式碼，而模組module與專案內的程式碼組織相關，以下是模組的範例：</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb132-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-1" tabindex="-1"></a><span class="kw">mod</span> spores <span class="op">{</span></span>
<span id="cb132-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-2" tabindex="-1"></a>  <span class="kw">use</span> <span class="pp">cells::</span><span class="op">{</span>Cell<span class="op">,</span> Gene<span class="op">};</span></span>
<span id="cb132-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-3" tabindex="-1"></a>  </span>
<span id="cb132-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-4" tabindex="-1"></a>  </span>
<span id="cb132-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-5" tabindex="-1"></a>  <span class="kw">pub</span> <span class="kw">struct</span> Spore<span class="op">{</span></span>
<span id="cb132-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-6" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb132-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-7" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb132-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-8" tabindex="-1"></a>  </span>
<span id="cb132-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-9" tabindex="-1"></a>  <span class="kw">pub</span> <span class="kw">fn</span> produce_spore(factory<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> SpoerFactory) <span class="op">-&gt;</span> Spore<span class="op">{</span></span>
<span id="cb132-10"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-10" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb132-11"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-11" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb132-12"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-12" tabindex="-1"></a>  </span>
<span id="cb132-13"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-13" tabindex="-1"></a>  <span class="kw">pub</span>(<span class="kw">crate</span>) <span class="kw">fn</span> genes(spore<span class="op">:</span> <span class="op">&amp;</span>Spore) <span class="op">-&gt;</span> <span class="dt">Vec</span><span class="op">&lt;</span>Gene<span class="op">&gt;{</span></span>
<span id="cb132-14"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-14" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb132-15"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-15" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb132-16"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-16" tabindex="-1"></a>  </span>
<span id="cb132-17"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-17" tabindex="-1"></a>  <span class="kw">fn</span> recombine(parent<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> Cell) <span class="op">{</span></span>
<span id="cb132-18"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-18" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb132-19"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-19" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb132-20"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-20" tabindex="-1"></a>  </span>
<span id="cb132-21"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb132-21" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><code>pub</code>是共用的，意思是你可以在模組外呼叫它們。而pub(crate)是僅限模組內共用，它不能在其他模組呼叫。沒有pub的是私有的，只能在定義它的模組內使用。</p>
<div id="嵌套模組" class="section level3" number="8.2.1">
<h3>
<span class="header-section-number">8.2.1</span> 嵌套模組<a class="anchor" aria-label="anchor" href="#%E5%B5%8C%E5%A5%97%E6%A8%A1%E7%B5%84"><i class="fas fa-link"></i></a>
</h3>
<p>嵌套模組的概念就是像俄羅斯娃娃般，在模組內放入模組：</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb133-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb133-1" tabindex="-1"></a><span class="kw">mod</span> transport <span class="op">{</span></span>
<span id="cb133-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb133-2" tabindex="-1"></a>  <span class="kw">pub</span> <span class="kw">mod</span> road <span class="op">{</span></span>
<span id="cb133-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb133-3" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb133-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb133-4" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb133-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb133-5" tabindex="-1"></a>  </span>
<span id="cb133-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb133-6" tabindex="-1"></a>  <span class="kw">pub</span> <span class="kw">mod</span> rail <span class="op">{</span></span>
<span id="cb133-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb133-7" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb133-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb133-8" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb133-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb133-9" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>以上是錯誤的示範，因為你要確保包覆公開模組的模組也必須是公開的：</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb134-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-1" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">mod</span> transport <span class="op">{</span></span>
<span id="cb134-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-2" tabindex="-1"></a>  <span class="kw">pub</span> <span class="kw">mod</span> road <span class="op">{</span></span>
<span id="cb134-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-3" tabindex="-1"></a>    <span class="kw">pub</span> <span class="kw">mod</span> car<span class="op">{</span></span>
<span id="cb134-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-4" tabindex="-1"></a>      <span class="kw">pub</span>(<span class="kw">in</span> <span class="kw">crate</span><span class="pp">::transport::</span>road) <span class="kw">fn</span> drive()<span class="op">{</span></span>
<span id="cb134-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-5" tabindex="-1"></a>        <span class="op">...</span></span>
<span id="cb134-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-6" tabindex="-1"></a>      <span class="op">}</span></span>
<span id="cb134-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-7" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb134-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-8" tabindex="-1"></a>    <span class="kw">use</span> <span class="pp">car::</span>drive<span class="op">;</span><span class="co">// 正確，在模組內</span></span>
<span id="cb134-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-9" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb134-10"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-10" tabindex="-1"></a>  </span>
<span id="cb134-11"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-11" tabindex="-1"></a></span>
<span id="cb134-12"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-12" tabindex="-1"></a>  <span class="kw">pub</span> <span class="kw">mod</span> rail <span class="op">{</span></span>
<span id="cb134-13"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-13" tabindex="-1"></a>    <span class="kw">use</span> <span class="pp">road::car::</span>drive<span class="op">;</span><span class="co">//錯誤，不在模組內</span></span>
<span id="cb134-14"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-14" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb134-15"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb134-15" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>這種模式雖然能讓你在單一檔案寫完所有程式，但這樣做容易讓程式碼難以維護。</p>
</div>
</div>
<div id="不同檔案" class="section level2" number="8.3">
<h2>
<span class="header-section-number">8.3</span> 不同檔案<a class="anchor" aria-label="anchor" href="#%E4%B8%8D%E5%90%8C%E6%AA%94%E6%A1%88"><i class="fas fa-link"></i></a>
</h2>
<p>第一，若只有一層模組，假設分為<code>main.rs</code>與<code>spores.rs</code>，你可以先在<code>main.rs</code>中宣告模組：</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb135-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb135-1" tabindex="-1"></a><span class="kw">mod</span> spores<span class="op">;</span></span></code></pre></div>
<p>接著，直接在<code>spores.rs</code>中寫入模組的函式、變數</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb136-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-1" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">struct</span> Spore<span class="op">{</span></span>
<span id="cb136-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-2" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb136-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-3" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-4" tabindex="-1"></a></span>
<span id="cb136-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-5" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">fn</span> produce_spore(factory<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> SpoerFactory) <span class="op">-&gt;</span> Spore<span class="op">{</span></span>
<span id="cb136-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-6" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb136-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-7" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-8" tabindex="-1"></a></span>
<span id="cb136-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-9" tabindex="-1"></a><span class="kw">pub</span>(<span class="kw">crate</span>) <span class="kw">fn</span> genes(spore<span class="op">:</span> <span class="op">&amp;</span>Spore) <span class="op">-&gt;</span> <span class="dt">Vec</span><span class="op">&lt;</span>Gene<span class="op">&gt;{</span></span>
<span id="cb136-10"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-10" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb136-11"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-11" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-12"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-12" tabindex="-1"></a></span>
<span id="cb136-13"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-13" tabindex="-1"></a><span class="kw">fn</span> recombine(parent<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> Cell) <span class="op">{</span></span>
<span id="cb136-14"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-14" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb136-15"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb136-15" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>當你組建carte時，Rust看到<code>mod spores</code>時，會尋找<code>spores.rs</code>或<code>spores/mod.rs</code>，這樣就可以找到模組。</p>
<p>若是模組中的模組，你可以為模組創建自己的資料夾，首先在main.rs宣告：</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb137-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb137-1" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">mod</span> transport<span class="op">;</span></span></code></pre></div>
<p>我們一樣假設transport底下有三層：<code>road</code>、<code>rail</code>、<code>sea</code>，你要先在transport/mod.rs中宣告：</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb138-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb138-1" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">mod</span> road<span class="op">;</span></span>
<span id="cb138-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb138-2" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">mod</span> rail<span class="op">;</span></span>
<span id="cb138-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb138-3" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">mod</span> sea<span class="op">;</span></span></code></pre></div>
<p>若road底下還有car與bus，你可以在road/mod.rs中宣告：</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb139-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb139-1" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">mod</span> car<span class="op">;</span></span>
<span id="cb139-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb139-2" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">mod</span> bus<span class="op">;</span></span></code></pre></div>
<p>整個結構會像這樣：</p>
<pre><code>.
├── Cargo.toml
└── src
    ├── children.rs
    ├── main.rs
    └── road
        ├── bus.rs
        ├── car.rs
        └── mod.rs</code></pre>
<div id="路徑與匯入" class="section level3" number="8.3.1">
<h3>
<span class="header-section-number">8.3.1</span> 路徑與匯入<a class="anchor" aria-label="anchor" href="#%E8%B7%AF%E5%BE%91%E8%88%87%E5%8C%AF%E5%85%A5"><i class="fas fa-link"></i></a>
</h3>
<p><code>::</code>運算子讓你引用程式庫的功能，你可以直接寫出完整的引用，或已先將功能匯入模組再使用</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb141-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb141-1" tabindex="-1"></a><span class="kw">let</span> <span class="kw">mut</span> map1 <span class="op">=</span> <span class="pp">std::collections::HashMap::</span>new()<span class="op">;</span></span>
<span id="cb141-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb141-2" tabindex="-1"></a></span>
<span id="cb141-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb141-3" tabindex="-1"></a><span class="kw">use</span> <span class="pp">std::collections::</span>HashMap<span class="op">;</span></span>
<span id="cb141-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb141-4" tabindex="-1"></a><span class="kw">let</span> <span class="kw">mut</span> map2 <span class="op">=</span> <span class="pp">HashMap::</span>new()<span class="op">;</span></span></code></pre></div>
<p>後者概念很簡單，就是把<code>std::collections::HashMap</code>用HashMap取代，這樣你就可以直接使用HashMap。</p>
<p>你可以ㄧ次匯入多個、所有模組：</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb142-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb142-1" tabindex="-1"></a><span class="kw">use</span> <span class="pp">std::collections::</span><span class="op">{</span>HashMap<span class="op">,</span> HashSet<span class="op">};</span><span class="co">// 一次匯入多個</span></span>
<span id="cb142-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb142-2" tabindex="-1"></a><span class="kw">use</span> <span class="pp">std::collections::</span><span class="op">*;</span><span class="co">// 匯入所有</span></span>
<span id="cb142-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb142-3" tabindex="-1"></a><span class="kw">use</span> <span class="pp">std::collections::</span>HashMap <span class="kw">as</span> Map<span class="op">;</span><span class="co">// 別名</span></span>
<span id="cb142-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb142-4" tabindex="-1"></a><span class="kw">use</span> <span class="pp">std::fs::</span><span class="op">{</span><span class="kw">self</span><span class="op">,</span> File<span class="op">};</span><span class="co">// 匯入fs與File</span></span></code></pre></div>
<p>模組不會自動繼承父模組的功能，例如在protiens/mod.rs：</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb143-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb143-1" tabindex="-1"></a><span class="co">// proteins/mod.rs</span></span>
<span id="cb143-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb143-2" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">enum</span> AminoAcid <span class="op">{</span></span>
<span id="cb143-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb143-3" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb143-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb143-4" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb143-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb143-5" tabindex="-1"></a></span>
<span id="cb143-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb143-6" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">mod</span> enzymes <span class="op">{</span></span>
<span id="cb143-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb143-7" tabindex="-1"></a>  <span class="kw">pub</span> <span class="kw">struct</span> Enzyme <span class="op">{</span></span>
<span id="cb143-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb143-8" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb143-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb143-9" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb143-10"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb143-10" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>那麼，在proteins/synthesis.rs，你可能想在synthesis.rs中使用AminoAcid與Enzyme，你必須在synthesis.rs中匯入：</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb144-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb144-1" tabindex="-1"></a><span class="co">// proteins/synthesis.rs</span></span>
<span id="cb144-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb144-2" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">fn</span> synthesize(seq<span class="op">:</span> <span class="op">&amp;</span>[AminoAcid]) <span class="co">// 錯誤</span></span>
<span id="cb144-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb144-3" tabindex="-1"></a></span>
<span id="cb144-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb144-4" tabindex="-1"></a><span class="kw">use</span> <span class="kw">super</span><span class="pp">::</span>AminoAcid <span class="co">// 必須從父輩匯入</span></span></code></pre></div>
<p>如果你想在父輩模組用子模組的功能，依然要明確指出路徑</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb145-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb145-1" tabindex="-1"></a><span class="co">// proteins/mod.rs</span></span>
<span id="cb145-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb145-2" tabindex="-1"></a></span>
<span id="cb145-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb145-3" tabindex="-1"></a><span class="kw">use</span> <span class="pp">synthesis::</span>synthesize<span class="op">;</span></span></code></pre></div>
<p>相較於<code>super</code>關鍵字，<code>crate</code>是指包住當前模組的crate，這樣寫可以讓模組更具彈性，不會因為模組的位置而受限。</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb146-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb146-1" tabindex="-1"></a><span class="co">// proteins/synthesis.rs</span></span>
<span id="cb146-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb146-2" tabindex="-1"></a><span class="kw">use</span> <span class="kw">crate</span><span class="pp">::protiens::</span>AminoAcid<span class="op">;</span></span>
<span id="cb146-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb146-3" tabindex="-1"></a></span>
<span id="cb146-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb146-4" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">fn</span> synthesize(seq<span class="op">:</span> <span class="op">&amp;</span>[AminoAcid]) <span class="op">{</span></span>
<span id="cb146-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb146-5" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb146-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb146-6" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>有時候你的模組名稱與第三方crate名稱相同，當然你要盡量避免這件事，有兩種方法可以解決這件事，<code>self</code>與<code>::</code>:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb147-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb147-1" tabindex="-1"></a><span class="kw">use</span> <span class="pp">image::</span>Pixels<span class="op">;</span> <span class="co">//會與crate名稱衝突</span></span>
<span id="cb147-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb147-2" tabindex="-1"></a></span>
<span id="cb147-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb147-3" tabindex="-1"></a><span class="kw">use</span> <span class="pp">::image::</span>Pixels<span class="op">;</span></span>
<span id="cb147-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb147-4" tabindex="-1"></a><span class="kw">use</span> <span class="kw">self</span><span class="pp">::image::</span>Pixels<span class="op">;</span></span></code></pre></div>
</div>
<div id="pub的struct" class="section level3" number="8.3.2">
<h3>
<span class="header-section-number">8.3.2</span> pub的struct<a class="anchor" aria-label="anchor" href="#pub%E7%9A%84struct"><i class="fas fa-link"></i></a>
</h3>
<p>struct關鍵字在Rust相當常用，你可以在struct自訂的結構型態。ㄧ般的struct是私有的，你可以用pub讓它變成公開的：</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb148-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb148-1" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">struct</span> Spore <span class="op">{</span></span>
<span id="cb148-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb148-2" tabindex="-1"></a>  <span class="kw">pub</span> genes<span class="op">:</span> <span class="dt">Vec</span><span class="op">&lt;</span>Gene<span class="op">&gt;,</span></span>
<span id="cb148-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb148-3" tabindex="-1"></a>  <span class="kw">pub</span> age<span class="op">:</span> <span class="dt">u32</span></span>
<span id="cb148-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb148-4" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>當struct是公開的，它的子輩與整個模組都可以使用它，這種透過<strong>模組控制存取</strong>其實是一種很好的設計模式，相較於Java或C++<strong>類別控制存取</strong>，減少了「getter」與「setter」的使用，以下附上範例</p>
</div>
</div>
<div class="panelset">
<div id="rust-1" class="section level2 unnumbered panel">
<h2>Rust<a class="anchor" aria-label="anchor" href="#rust-1"><i class="fas fa-link"></i></a>
</h2>
<div id="library.rs" class="section level3" number="8.3.3">
<h3>
<span class="header-section-number">8.3.3</span> library.rs<a class="anchor" aria-label="anchor" href="#library.rs"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb149"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb149-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-1" tabindex="-1"></a><span class="kw">mod</span> library <span class="op">{</span></span>
<span id="cb149-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-2" tabindex="-1"></a>    <span class="kw">pub</span> <span class="kw">struct</span> Book <span class="op">{</span></span>
<span id="cb149-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-3" tabindex="-1"></a>        <span class="kw">pub</span> title<span class="op">:</span> <span class="dt">String</span><span class="op">,</span></span>
<span id="cb149-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-4" tabindex="-1"></a>        author<span class="op">:</span> <span class="dt">String</span><span class="op">,</span> <span class="co">// 默認是私有的</span></span>
<span id="cb149-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-5" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb149-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-6" tabindex="-1"></a></span>
<span id="cb149-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-7" tabindex="-1"></a>    <span class="kw">pub</span> <span class="kw">fn</span> new_book(title<span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span><span class="op">,</span> author<span class="op">:</span> <span class="op">&amp;</span><span class="dt">str</span>) <span class="op">-&gt;</span> Book <span class="op">{</span></span>
<span id="cb149-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-8" tabindex="-1"></a>        Book <span class="op">{</span></span>
<span id="cb149-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-9" tabindex="-1"></a>            title<span class="op">:</span> title<span class="op">.</span>to_string()<span class="op">,</span></span>
<span id="cb149-10"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-10" tabindex="-1"></a>            author<span class="op">:</span> author<span class="op">.</span>to_string()<span class="op">,</span></span>
<span id="cb149-11"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-11" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb149-12"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-12" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb149-13"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb149-13" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="main.rs" class="section level3" number="8.3.4">
<h3>
<span class="header-section-number">8.3.4</span> main.rs<a class="anchor" aria-label="anchor" href="#main.rs"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb150"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb150-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb150-1" tabindex="-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb150-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb150-2" tabindex="-1"></a>    <span class="kw">let</span> book <span class="op">=</span> <span class="pp">library::</span>new_book(<span class="st">"The Rust Book"</span><span class="op">,</span> <span class="st">"Steve"</span>)<span class="op">;</span></span>
<span id="cb150-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb150-3" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">"Title: {}"</span><span class="op">,</span> book<span class="op">.</span>title)<span class="op">;</span> <span class="co">// 可以訪問公開的字段</span></span>
<span id="cb150-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb150-4" tabindex="-1"></a>    <span class="co">// println!("Author: {}", book.author); // 無法訪問私有字段</span></span>
<span id="cb150-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb150-5" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
<div id="java" class="section level2 unnumbered panel">
<h2>Java<a class="anchor" aria-label="anchor" href="#java"><i class="fas fa-link"></i></a>
</h2>
<div id="library.java" class="section level3" number="8.3.5">
<h3>
<span class="header-section-number">8.3.5</span> Library.java<a class="anchor" aria-label="anchor" href="#library.java"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb151"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb151-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-1" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Library <span class="op">{</span></span>
<span id="cb151-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-2" tabindex="-1"></a>    <span class="co">// 定義內部的 Book 類別</span></span>
<span id="cb151-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-3" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="kw">class</span> <span class="bu">Book</span> <span class="op">{</span></span>
<span id="cb151-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-4" tabindex="-1"></a>        <span class="kw">private</span> <span class="bu">String</span> title<span class="op">;</span></span>
<span id="cb151-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-5" tabindex="-1"></a>        <span class="kw">private</span> <span class="bu">String</span> author<span class="op">;</span></span>
<span id="cb151-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-6" tabindex="-1"></a></span>
<span id="cb151-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-7" tabindex="-1"></a>        <span class="co">// 公開的構造函數</span></span>
<span id="cb151-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-8" tabindex="-1"></a>        <span class="kw">public</span> <span class="bu">Book</span><span class="op">(</span><span class="bu">String</span> title<span class="op">,</span> <span class="bu">String</span> author<span class="op">)</span> <span class="op">{</span></span>
<span id="cb151-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-9" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">title</span> <span class="op">=</span> title<span class="op">;</span></span>
<span id="cb151-10"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-10" tabindex="-1"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">author</span> <span class="op">=</span> author<span class="op">;</span></span>
<span id="cb151-11"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-11" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb151-12"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-12" tabindex="-1"></a></span>
<span id="cb151-13"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-13" tabindex="-1"></a>        <span class="co">// 公開的 getter 方法</span></span>
<span id="cb151-14"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-14" tabindex="-1"></a>        <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getTitle</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb151-15"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-15" tabindex="-1"></a>            <span class="cf">return</span> title<span class="op">;</span></span>
<span id="cb151-16"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-16" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb151-17"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-17" tabindex="-1"></a></span>
<span id="cb151-18"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-18" tabindex="-1"></a>        <span class="co">// 私有的 getter 方法</span></span>
<span id="cb151-19"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-19" tabindex="-1"></a>        <span class="kw">private</span> <span class="bu">String</span> <span class="fu">getAuthor</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb151-20"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-20" tabindex="-1"></a>            <span class="cf">return</span> author<span class="op">;</span></span>
<span id="cb151-21"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-21" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb151-22"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-22" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb151-23"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-23" tabindex="-1"></a></span>
<span id="cb151-24"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-24" tabindex="-1"></a>    <span class="co">// 創建新 Book 的靜態方法</span></span>
<span id="cb151-25"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-25" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="bu">Book</span> <span class="fu">newBook</span><span class="op">(</span><span class="bu">String</span> title<span class="op">,</span> <span class="bu">String</span> author<span class="op">)</span> <span class="op">{</span></span>
<span id="cb151-26"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-26" tabindex="-1"></a>        <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Book</span><span class="op">(</span>title<span class="op">,</span> author<span class="op">);</span></span>
<span id="cb151-27"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-27" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb151-28"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb151-28" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="main.java" class="section level3" number="8.3.6">
<h3>
<span class="header-section-number">8.3.6</span> Main.java<a class="anchor" aria-label="anchor" href="#main.java"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb152"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb152-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb152-1" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Main <span class="op">{</span></span>
<span id="cb152-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb152-2" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">main</span><span class="op">(</span><span class="bu">String</span><span class="op">[]</span> args<span class="op">)</span> <span class="op">{</span></span>
<span id="cb152-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb152-3" tabindex="-1"></a>        Library<span class="op">.</span><span class="fu">Book</span> book <span class="op">=</span> Library<span class="op">.</span><span class="fu">newBook</span><span class="op">(</span><span class="st">"The Rust Book"</span><span class="op">,</span> <span class="st">"Steve"</span><span class="op">);</span></span>
<span id="cb152-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb152-4" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"Title: "</span> <span class="op">+</span> book<span class="op">.</span><span class="fu">getTitle</span><span class="op">());</span></span>
<span id="cb152-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb152-5" tabindex="-1"></a>        <span class="co">// System.out.println("Author: " + book.getAuthor()); // 無法訪問私有方法</span></span>
<span id="cb152-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb152-6" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb152-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb152-7" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
</div>
</div>
<div id="將程式轉換成程式庫" class="section level2" number="8.4">
<h2>
<span class="header-section-number">8.4</span> 將程式轉換成程式庫<a class="anchor" aria-label="anchor" href="#%E5%B0%87%E7%A8%8B%E5%BC%8F%E8%BD%89%E6%8F%9B%E6%88%90%E7%A8%8B%E5%BC%8F%E5%BA%AB"><i class="fas fa-link"></i></a>
</h2>
<p>你一開始構想寫一個模擬蕨類生長的程式，你後來發現許多函式需要重複使用，你決定將程式轉換成一整個程式庫，先來看一下你的程式：</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb153-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-1" tabindex="-1"></a><span class="kw">struct</span> feather<span class="op">{</span></span>
<span id="cb153-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-2" tabindex="-1"></a>  size<span class="op">:</span> <span class="dt">f64</span><span class="op">,</span></span>
<span id="cb153-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-3" tabindex="-1"></a>  growth_rate<span class="op">:</span> <span class="dt">f64</span></span>
<span id="cb153-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-4" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb153-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-5" tabindex="-1"></a></span>
<span id="cb153-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-6" tabindex="-1"></a><span class="kw">impl</span> Fern <span class="op">{</span></span>
<span id="cb153-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-7" tabindex="-1"></a>  <span class="co">/// 模擬生長過程</span></span>
<span id="cb153-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-8" tabindex="-1"></a>  <span class="kw">fn</span> grow(<span class="op">&amp;</span><span class="kw">mut</span> <span class="kw">self</span>)<span class="op">{</span></span>
<span id="cb153-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-9" tabindex="-1"></a>    <span class="kw">self</span><span class="op">.</span>size <span class="op">*=</span> <span class="dv">1.0</span> <span class="op">+</span> <span class="kw">self</span><span class="op">.</span>growth_rate<span class="op">;</span></span>
<span id="cb153-10"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-10" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb153-11"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-11" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb153-12"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-12" tabindex="-1"></a></span>
<span id="cb153-13"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-13" tabindex="-1"></a><span class="kw">fn</span> run_simulation(fern<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> Fern<span class="op">,</span> days<span class="op">:</span> <span class="dt">usize</span>)<span class="op">{</span></span>
<span id="cb153-14"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-14" tabindex="-1"></a>  <span class="cf">for</span> _ <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span>days<span class="op">{</span></span>
<span id="cb153-15"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-15" tabindex="-1"></a>    fern<span class="op">.</span>grow()<span class="op">;</span></span>
<span id="cb153-16"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-16" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb153-17"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-17" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb153-18"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-18" tabindex="-1"></a></span>
<span id="cb153-19"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-19" tabindex="-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb153-20"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-20" tabindex="-1"></a>  <span class="kw">let</span> <span class="kw">mut</span> fern <span class="op">=</span> Fern <span class="op">{</span></span>
<span id="cb153-21"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-21" tabindex="-1"></a>    size<span class="op">:</span><span class="dv">1.0</span><span class="op">,</span></span>
<span id="cb153-22"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-22" tabindex="-1"></a>    growth_rate<span class="op">:</span> <span class="dv">0.001</span></span>
<span id="cb153-23"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-23" tabindex="-1"></a>  <span class="op">};</span></span>
<span id="cb153-24"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-24" tabindex="-1"></a>  run_simulation(<span class="op">&amp;</span><span class="kw">mut</span> fern<span class="op">,</span> <span class="dv">1000</span>)<span class="op">;</span></span>
<span id="cb153-25"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-25" tabindex="-1"></a>  <span class="pp">println!</span>(<span class="st">"final fern size: {}"</span><span class="op">,</span> fern<span class="op">.</span>size)<span class="op">;</span></span>
<span id="cb153-26"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb153-26" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<ul>
<li><p>先將main函式移出，我們等等再處理</p></li>
<li><p>把原檔名(main.rs)改成lib.rs</p></li>
<li><p>接著，把函式改成<code>pub</code>，以便其他程式使用</p></li>
</ul>
<div class="sourceCode" id="cb154"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb154-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-1" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">struct</span> Fern <span class="op">{</span></span>
<span id="cb154-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-2" tabindex="-1"></a>    <span class="kw">pub</span> size<span class="op">:</span> <span class="dt">f64</span><span class="op">,</span></span>
<span id="cb154-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-3" tabindex="-1"></a>    <span class="kw">pub</span> growth_rate<span class="op">:</span> <span class="dt">f64</span></span>
<span id="cb154-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-4" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb154-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-5" tabindex="-1"></a></span>
<span id="cb154-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-6" tabindex="-1"></a><span class="kw">impl</span> Fern <span class="op">{</span></span>
<span id="cb154-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-7" tabindex="-1"></a>    <span class="co">/// 模擬生長過程</span></span>
<span id="cb154-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-8" tabindex="-1"></a>    <span class="kw">pub</span> <span class="kw">fn</span> grow(<span class="op">&amp;</span><span class="kw">mut</span> <span class="kw">self</span>)<span class="op">{</span></span>
<span id="cb154-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-9" tabindex="-1"></a>      <span class="kw">self</span><span class="op">.</span>size <span class="op">*=</span> <span class="dv">1.0</span> <span class="op">+</span> <span class="kw">self</span><span class="op">.</span>growth_rate<span class="op">;</span></span>
<span id="cb154-10"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-10" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb154-11"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-11" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb154-12"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-12" tabindex="-1"></a></span>
<span id="cb154-13"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-13" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">fn</span> run_simulation(fern<span class="op">:</span> <span class="op">&amp;</span><span class="kw">mut</span> Fern<span class="op">,</span> days<span class="op">:</span> <span class="dt">usize</span>)<span class="op">{</span></span>
<span id="cb154-14"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-14" tabindex="-1"></a>    <span class="cf">for</span> _ <span class="kw">in</span> <span class="dv">0</span><span class="op">..</span>days<span class="op">{</span></span>
<span id="cb154-15"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-15" tabindex="-1"></a>      fern<span class="op">.</span>grow()<span class="op">;</span></span>
<span id="cb154-16"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-16" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb154-17"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb154-17" tabindex="-1"></a>  <span class="op">}</span></span></code></pre></div>
<p>這個程式庫算建立好了，如果你想在這個程式庫裡執行程式，你可以在src下再創一個bin目錄，並再下創一個rs檔，這裡以efern.rs為例：</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb155-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb155-1" tabindex="-1"></a><span class="co">// src/bin/efern.rs</span></span>
<span id="cb155-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb155-2" tabindex="-1"></a><span class="kw">use</span> <span class="pp">fern_sim::</span><span class="op">{</span>Fern<span class="op">,</span> run_simulation<span class="op">};</span></span>
<span id="cb155-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb155-3" tabindex="-1"></a></span>
<span id="cb155-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb155-4" tabindex="-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb155-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb155-5" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> fern <span class="op">=</span> Fern <span class="op">{</span></span>
<span id="cb155-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb155-6" tabindex="-1"></a>        size<span class="op">:</span> <span class="dv">1.0</span><span class="op">,</span></span>
<span id="cb155-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb155-7" tabindex="-1"></a>        growth_rate<span class="op">:</span> <span class="dv">0.001</span><span class="op">,</span></span>
<span id="cb155-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb155-8" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb155-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb155-9" tabindex="-1"></a>    run_simulation(<span class="op">&amp;</span><span class="kw">mut</span> fern<span class="op">,</span> <span class="dv">1000</span>)<span class="op">;</span></span>
<span id="cb155-10"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb155-10" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">"final fern size: {}"</span><span class="op">,</span> fern<span class="op">.</span>size)<span class="op">;</span></span>
<span id="cb155-11"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb155-11" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>接著就可以用<code>build</code>建立程式庫，並聲明你要跑的程式：</p>
<pre><code>cargo build --verbose

cargo run --bin efern
    Finished dev [unoptimized + debuginfo] target(s) in 0.00s
     Running `target/debug/efern`
final fern size: 2.7169239322355985</code></pre>
<p>回顧一下整個結構：</p>
<pre><code>├── Cargo.lock
├── Cargo.toml
└── src
    ├── bin
    │   └── efern.rs
    └── lib.rs</code></pre>
<p>假如你想要在其他專案中使用程式庫，例如我們要在teer程式模擬，先在teer.toml中加入：</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb158-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb158-1" tabindex="-1"></a>[dependencies]</span>
<span id="cb158-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb158-2" tabindex="-1"></a>fern_sim <span class="op">=</span> <span class="op">{</span> path <span class="op">=</span> <span class="st">"../fern_sim"</span><span class="op">}</span></span></code></pre></div>
<p>記得要將fern_sim專案放入teer專案，其他都幾乎一樣，來看一下結構</p>
<pre><code>.
├── Cargo.lock
├── Cargo.toml
├── fern_sim
│   ├── Cargo.lock
│   ├── Cargo.toml
│   └── src
│       ├── bin
│       │   └── efern.rs
│       └── lib.rs
└── src
    └── main.rs</code></pre>
</div>
<div id="屬性" class="section level2" number="8.5">
<h2>
<span class="header-section-number">8.5</span> 屬性<a class="anchor" aria-label="anchor" href="#%E5%B1%AC%E6%80%A7"><i class="fas fa-link"></i></a>
</h2>
<p>例如，你希望用非camelCase的變數名稱，你可以在變數前加上<code>#[allow(non_camel_case_types)]</code>，這樣Rust就不會報錯：</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb160-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb160-1" tabindex="-1"></a><span class="at">#[</span>allow<span class="at">(</span>non_camel_case_types<span class="at">)]</span></span>
<span id="cb160-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb160-2" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">struct</span> HTTPResponse <span class="op">{</span></span>
<span id="cb160-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb160-3" tabindex="-1"></a>  <span class="op">...</span></span>
<span id="cb160-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb160-4" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>還有常見的條件式編譯，也就是#[cfg]</p>
<div class="inline-table"><table class="table table-sm">
<tr>
<th>
條件
</th>
<th>
說明
</th>
</tr>
<tr>
<td>
test
</td>
<td>
啟用測試
</td>
</tr>
<tr>
<td>
debug_assertions
</td>
<td>
啟用偵測斷言
</td>
</tr>
<tr>
<td>
unix
</td>
<td>
為Unix編譯
</td>
</tr>
<tr>
<td>
target_pointer_width = “64”
</td>
<td>
針對64-bit平台，另外還有32bit
</td>
</tr>
<tr>
<td>
target_arch = “x86_64
</td>
<td>
其他還有：x86、arm、aarch64
</td>
</tr>
<tr>
<td>
target_os = “macos”
</td>
<td>
其他還有：windows、“ios”、android、linux
</td>
</tr>
<tr>
<td>
unix
</td>
<td>
Unix-like系統
</td>
</tr>
<tr>
<td>
windows
</td>
<td>
Windows系統
</td>
</tr>
<tr>
<td>
feature = “robot”
</td>
<td>
啟動名為feature的自訂功能，功能在cargo區域內的feature區域宣告
</td>
</tr>
<tr>
<td>
all
</td>
<td>
滿足A與B的狀況
</td>
</tr>
<tr>
<td>
any
</td>
<td>
A或B滿足
</td>
</tr>
<tr>
<td>
not(A)
</td>
<td>
不滿足A的狀況
</td>
</tr>
</table></div>
<p>假如你想視情況讓程式顯示英文或中文，你可以先在主程式：</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb161-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-1" tabindex="-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb161-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-2" tabindex="-1"></a>    hello()<span class="op">;</span></span>
<span id="cb161-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-3" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-4" tabindex="-1"></a></span>
<span id="cb161-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-5" tabindex="-1"></a><span class="at">#[</span>cfg<span class="at">(</span>not<span class="at">(</span>feature <span class="op">=</span> <span class="st">"english"</span><span class="at">))]</span></span>
<span id="cb161-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-6" tabindex="-1"></a><span class="kw">fn</span> hello() <span class="op">{</span></span>
<span id="cb161-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-7" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">"你好，世界！"</span>)<span class="op">;</span></span>
<span id="cb161-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-8" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-9" tabindex="-1"></a></span>
<span id="cb161-10"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-10" tabindex="-1"></a><span class="at">#[</span>cfg<span class="at">(</span>feature <span class="op">=</span> <span class="st">"english"</span><span class="at">)]</span></span>
<span id="cb161-11"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-11" tabindex="-1"></a><span class="kw">fn</span> hello() <span class="op">{</span></span>
<span id="cb161-12"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-12" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">"Hello, world!"</span>)<span class="op">;</span></span>
<span id="cb161-13"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb161-13" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>接著在Cargo.toml中加入：</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb162-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb162-1" tabindex="-1"></a>[features]</span>
<span id="cb162-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb162-2" tabindex="-1"></a><span class="kw">default</span> <span class="op">=</span> []</span>
<span id="cb162-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb162-3" tabindex="-1"></a>english <span class="op">=</span> []</span></code></pre></div>
<p>這樣你就可以用<code>cargo run</code>來執行中文版本，或是<code>cargo run --features english</code>來執行英文版本。</p>
<p>另外的例子是你想在不同平台發布：</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb163-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-1" tabindex="-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb163-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-2" tabindex="-1"></a>    platform_specific_function()<span class="op">;</span></span>
<span id="cb163-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-3" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-4" tabindex="-1"></a></span>
<span id="cb163-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-5" tabindex="-1"></a><span class="at">#[</span>cfg<span class="at">(</span>target_os <span class="op">=</span> <span class="st">"windows"</span><span class="at">)]</span></span>
<span id="cb163-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-6" tabindex="-1"></a><span class="kw">fn</span> platform_specific_function() <span class="op">{</span></span>
<span id="cb163-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-7" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">"This is Windows!"</span>)<span class="op">;</span></span>
<span id="cb163-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-8" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-9" tabindex="-1"></a></span>
<span id="cb163-10"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-10" tabindex="-1"></a><span class="at">#[</span>cfg<span class="at">(</span>not<span class="at">(</span>target_os <span class="op">=</span> <span class="st">"windows"</span><span class="at">))]</span></span>
<span id="cb163-11"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-11" tabindex="-1"></a><span class="kw">fn</span> platform_specific_function() <span class="op">{</span></span>
<span id="cb163-12"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-12" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">"This is not Windows!"</span>)<span class="op">;</span></span>
<span id="cb163-13"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb163-13" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>這裡就無需在Cargo.toml中加入任何東西，Rust會依據你的平台自動判斷。</p>
<p>最後，如果你想讓整個屬性覆蓋到你整個crate，你可以在文件最上方加入<code>#![...]</code></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb164-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb164-1" tabindex="-1"></a><span class="at">#![</span>allow<span class="at">(</span>dead_code<span class="at">)]</span></span>
<span id="cb164-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb164-2" tabindex="-1"></a></span>
<span id="cb164-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb164-3" tabindex="-1"></a><span class="kw">fn</span> main() <span class="op">{</span></span>
<span id="cb164-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb164-4" tabindex="-1"></a>    <span class="kw">let</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb164-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb164-5" tabindex="-1"></a>    <span class="pp">println!</span>(<span class="st">"x = {}"</span><span class="op">,</span> x)<span class="op">;</span></span>
<span id="cb164-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb164-6" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="測試" class="section level2" number="8.6">
<h2>
<span class="header-section-number">8.6</span> 測試<a class="anchor" aria-label="anchor" href="#%E6%B8%AC%E8%A9%A6"><i class="fas fa-link"></i></a>
</h2>
<p>我們在過去就曾用<code>#[test]</code>來測試程式，只要有這個標籤，在<code>cargo test</code>時，Rust就會執行這個函式。</p>
<p>假設你輸入<code>cargo test math</code>，Rust就會執行名稱有math的測試。</p>
<p>在簡單的程式中，我們可以用<code>assert!</code>或<code>assert_eq!</code>來測試，但前兩者會被放入release build中，你可以改用<code>debug_assert!</code>或<code>debug_assert_eq!</code>，這樣只有在debug build中才會執行。</p>
<div id="整合測試" class="section level3" number="8.6.1">
<h3>
<span class="header-section-number">8.6.1</span> 整合測試<a class="anchor" aria-label="anchor" href="#%E6%95%B4%E5%90%88%E6%B8%AC%E8%A9%A6"><i class="fas fa-link"></i></a>
</h3>
<p>當你的程式庫建立好後，你可能會想將測試放到程式庫外。這時候你可以在src同一層的test目錄下創建一個rs檔，舉個例子：</p>
<div class="sourceCode" id="cb165"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb165-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb165-1" tabindex="-1"></a><span class="co">// test/unfurl.rs</span></span>
<span id="cb165-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb165-2" tabindex="-1"></a></span>
<span id="cb165-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb165-3" tabindex="-1"></a><span class="kw">use</span> <span class="pp">fern_sim::</span>Terrarium<span class="op">;</span></span>
<span id="cb165-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb165-4" tabindex="-1"></a><span class="kw">use</span> <span class="pp">std::time::</span>Duration<span class="op">;</span></span>
<span id="cb165-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb165-5" tabindex="-1"></a></span>
<span id="cb165-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb165-6" tabindex="-1"></a><span class="at">#[</span>test<span class="at">]</span></span>
<span id="cb165-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb165-7" tabindex="-1"></a><span class="kw">fn</span> test_fiddlehead_unfurling() <span class="op">{</span></span>
<span id="cb165-8"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb165-8" tabindex="-1"></a>    <span class="kw">let</span> <span class="kw">mut</span> t <span class="op">=</span> <span class="pp">Terrarium::</span>new()<span class="op">;</span></span>
<span id="cb165-9"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb165-9" tabindex="-1"></a>    t<span class="op">.</span>add_plant(<span class="st">"fiddlehead"</span><span class="op">,</span> <span class="dv">0.1</span><span class="op">,</span> <span class="dv">0.01</span>)<span class="op">;</span></span>
<span id="cb165-10"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb165-10" tabindex="-1"></a>    t<span class="op">.</span>advance(<span class="pp">Duration::</span>from_secs(<span class="dv">1</span>))<span class="op">;</span></span>
<span id="cb165-11"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb165-11" tabindex="-1"></a>    <span class="pp">assert_eq!</span>(t<span class="op">.</span>get_plant(<span class="st">"fiddlehead"</span>)<span class="op">.</span>unwrap()<span class="op">.</span>size<span class="op">,</span> <span class="dv">0.11</span>)<span class="op">;</span></span>
<span id="cb165-12"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb165-12" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>整合測試的價值是它可以像其他用戶看待你的程式庫，他們測試的是crate公開的API。</p>
<p>cargo test會執行所有測試，包括整合測試，但你也可以用<code>cargo test --test unfurl</code>來執行單一測試。</p>
</div>
</div>
<div id="文件" class="section level2" number="8.7">
<h2>
<span class="header-section-number">8.7</span> 文件<a class="anchor" aria-label="anchor" href="#%E6%96%87%E4%BB%B6"><i class="fas fa-link"></i></a>
</h2>
<p>cargo doc的命令可以為你建立HTML文件，建立的文件會放在target/doc下：</p>
<pre><code>cargo doc --open --no-deps</code></pre>
<p><code>--open</code>會自動開啟瀏覽器，<code>--no-deps</code>會只建立你的程式庫文件，不會建立依賴的文件。</p>
<p>你可以在程式上，以<code>///</code>或<code>[#doc=...]</code>來寫註解，若想為整個模組寫註解，可以在模組前加上<code>//!</code>，這樣你的註解就會被放入文件中。</p>
<div class="inline-figure">
<img src="doc.png">
Rust有個特殊功能，就是Markdown的連結可以使用Rust項目指出它引用什麼，而不是相對URL，例如leaves::Leaf，例如這段程式會產生VascularPath、Leaf的文件網頁；</div>
<div class="sourceCode" id="cb167"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb167-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb167-1" tabindex="-1"></a><span class="co">/// 建立並回傳一個[`VascularPath`]，代表</span></span>
<span id="cb167-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb167-2" tabindex="-1"></a><span class="co">/// 從[`Root`][r]到[`leaf`](leaves::Leaf)的路徑。</span></span>
<span id="cb167-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb167-3" tabindex="-1"></a><span class="co">///</span></span>
<span id="cb167-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb167-4" tabindex="-1"></a><span class="co">/// [r]: roots::Root</span></span>
<span id="cb167-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb167-5" tabindex="-1"></a><span class="kw">pub</span> <span class="kw">fn</span> trace_path(leaf<span class="op">:</span> <span class="op">&amp;</span>Leaf) <span class="op">-&gt;</span> VascularPath <span class="op">{</span></span>
<span id="cb167-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb167-6" tabindex="-1"></a>    <span class="op">...</span></span>
<span id="cb167-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb167-7" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>你可以加入`#[doc(alias = “…”)]，來為搜尋引擎提供別名</p>
<p>如果你像要在文件中加入外部文件，你可以用<code>#![doc(include = "filename")]</code>，這樣你的文件就會被加入。</p>
<div id="doc-test" class="section level3" number="8.7.1">
<h3>
<span class="header-section-number">8.7.1</span> doc test<a class="anchor" aria-label="anchor" href="#doc-test"><i class="fas fa-link"></i></a>
</h3>
<p>你可以在文件中加入程式碼區塊：</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb168-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb168-1" tabindex="-1"></a><span class="co">/// # Examples</span></span>
<span id="cb168-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb168-2" tabindex="-1"></a><span class="co">/// ```</span></span>
<span id="cb168-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb168-3" tabindex="-1"></a><span class="co">/// if samples::everything().works() {</span></span>
<span id="cb168-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb168-4" tabindex="-1"></a><span class="co">///     println!("all good!");</span></span>
<span id="cb168-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb168-5" tabindex="-1"></a><span class="co">/// }</span></span>
<span id="cb168-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb168-6" tabindex="-1"></a><span class="co">/// ```</span></span></code></pre></div>
<p>它會被當成測試執行，而這種測試就很適合使用<code>assert!</code>或<code>assert_eq!</code>，這樣你就可以確保文件中的程式碼是正確的。</p>
<p>如果你想要測試，但又想隱藏部分程式碼，你可以用<code>#</code>來隱藏：</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb169-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb169-1" tabindex="-1"></a><span class="co">/// # Examples</span></span>
<span id="cb169-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb169-2" tabindex="-1"></a><span class="co">/// ```</span></span>
<span id="cb169-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb169-3" tabindex="-1"></a><span class="co">/// # use samples::everything;</span></span>
<span id="cb169-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb169-4" tabindex="-1"></a><span class="co">/// if everything().works() {</span></span>
<span id="cb169-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb169-5" tabindex="-1"></a><span class="co">///    println!("all good!");</span></span>
<span id="cb169-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb169-6" tabindex="-1"></a><span class="co">/// }</span></span>
<span id="cb169-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb169-7" tabindex="-1"></a><span class="co">/// ```</span></span></code></pre></div>
<p>又或者你不想讓它變成測試的ㄧ部分，你可以用<code>ignore</code>或<code>no_run</code>，但<code>no_run</code>仍然會測試可不可以編譯：</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb170-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb170-1" tabindex="-1"></a><span class="co">/// # Examples</span></span>
<span id="cb170-2"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb170-2" tabindex="-1"></a><span class="co">/// ```no_run</span></span>
<span id="cb170-3"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb170-3" tabindex="-1"></a><span class="co">/// use samples::everything;</span></span>
<span id="cb170-4"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb170-4" tabindex="-1"></a><span class="co">/// if everything().works() {</span></span>
<span id="cb170-5"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb170-5" tabindex="-1"></a><span class="co">///    println!("all good!");</span></span>
<span id="cb170-6"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb170-6" tabindex="-1"></a><span class="co">/// }</span></span>
<span id="cb170-7"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb170-7" tabindex="-1"></a><span class="co">/// ```</span></span></code></pre></div>
</div>
</div>
<div id="指定依賴項目" class="section level2" number="8.8">
<h2>
<span class="header-section-number">8.8</span> 指定依賴項目<a class="anchor" aria-label="anchor" href="#%E6%8C%87%E5%AE%9A%E4%BE%9D%E8%B3%B4%E9%A0%85%E7%9B%AE"><i class="fas fa-link"></i></a>
</h2>
<p>首先，如果你想要依賴項目不是在crates.io上面發布的。對此，你可以從Git版本庫URL與revision來指定：</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode rust"><code class="sourceCode rust"><span id="cb171-1"><a href="day07---crate%E8%88%87%E6%A8%A1%E7%B5%84.html#cb171-1" tabindex="-1"></a>image <span class="op">=</span> <span class="op">{</span>git <span class="op">=</span> <span class="st">"..."</span><span class="op">,</span> rev <span class="op">=</span> <span class="st">"..."</span><span class="op">}</span></span></code></pre></div>
<p>另一種是指出存放crate原始碼的目錄：</p>
<div class="sourceCode" id="cb172"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">image</span> <span class="op">=</span> <span class="op">{</span><span class="va">path</span> <span class="op">=</span> <span class="st">"../image"</span><span class="op">}</span></span></code></pre></div>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="day06---%E9%8C%AF%E8%AA%A4.html"><span class="header-section-number">7</span> Day06 - 錯誤</a></div>
<div class="next"><a href="day08---%E7%B5%90%E6%A7%8B.html"><span class="header-section-number">9</span> Day08 - 結構</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#day07---crate%E8%88%87%E6%A8%A1%E7%B5%84"><span class="header-section-number">8</span> Day07 - crate與模組</a></li>
<li>
<a class="nav-link" href="#crate"><span class="header-section-number">8.1</span> crate</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#edtion"><span class="header-section-number">8.1.1</span> edtion</a></li>
<li><a class="nav-link" href="#buid-profile"><span class="header-section-number">8.1.2</span> buid profile</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E6%A8%A1%E7%B5%84"><span class="header-section-number">8.2</span> 模組</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#%E5%B5%8C%E5%A5%97%E6%A8%A1%E7%B5%84"><span class="header-section-number">8.2.1</span> 嵌套模組</a></li></ul>
</li>
<li>
<a class="nav-link" href="#%E4%B8%8D%E5%90%8C%E6%AA%94%E6%A1%88"><span class="header-section-number">8.3</span> 不同檔案</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E8%B7%AF%E5%BE%91%E8%88%87%E5%8C%AF%E5%85%A5"><span class="header-section-number">8.3.1</span> 路徑與匯入</a></li>
<li><a class="nav-link" href="#pub%E7%9A%84struct"><span class="header-section-number">8.3.2</span> pub的struct</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#rust-1">Rust</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#library.rs"><span class="header-section-number">8.3.3</span> library.rs</a></li>
<li><a class="nav-link" href="#main.rs"><span class="header-section-number">8.3.4</span> main.rs</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#java">Java</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#library.java"><span class="header-section-number">8.3.5</span> Library.java</a></li>
<li><a class="nav-link" href="#main.java"><span class="header-section-number">8.3.6</span> Main.java</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%E5%B0%87%E7%A8%8B%E5%BC%8F%E8%BD%89%E6%8F%9B%E6%88%90%E7%A8%8B%E5%BC%8F%E5%BA%AB"><span class="header-section-number">8.4</span> 將程式轉換成程式庫</a></li>
<li><a class="nav-link" href="#%E5%B1%AC%E6%80%A7"><span class="header-section-number">8.5</span> 屬性</a></li>
<li>
<a class="nav-link" href="#%E6%B8%AC%E8%A9%A6"><span class="header-section-number">8.6</span> 測試</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#%E6%95%B4%E5%90%88%E6%B8%AC%E8%A9%A6"><span class="header-section-number">8.6.1</span> 整合測試</a></li></ul>
</li>
<li>
<a class="nav-link" href="#%E6%96%87%E4%BB%B6"><span class="header-section-number">8.7</span> 文件</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#doc-test"><span class="header-section-number">8.7.1</span> doc test</a></li></ul>
</li>
<li><a class="nav-link" href="#%E6%8C%87%E5%AE%9A%E4%BE%9D%E8%B3%B4%E9%A0%85%E7%9B%AE"><span class="header-section-number">8.8</span> 指定依賴項目</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rstudio/bookdown-demo/blob/master/07-.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rstudio/bookdown-demo/edit/master/07-.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Rust之書</strong>" was written by 董宸賓. It was last built on 2024-08-14.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
